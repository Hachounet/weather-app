(()=>{"use strict";var t={11:(t,e,r)=>{r.d(e,{A:()=>i});var o=r(601),a=r.n(o),n=r(314),c=r.n(n)()(a());c.push([t.id,'*{margin:0;padding:0;box-sizing:border-box}body{width:100vw;height:100vh;background-color:bisque;display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:2fr 15fr;grid-template-areas:"search search search" "infos infos infos"}body .on-loading{filter:blur(2px)}body header{grid-area:search;background-image:linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);width:100%;height:100%;display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:100%;justify-items:center;align-items:center}body header #location-zone{grid-column:3/4;display:flex}body header #search-zone{grid-column:2/3;grid-row:1;display:flex;justify-content:center;align-items:center;flex-direction:column}body header #forecast-btns-zone{grid-column:1/2;display:flex;justify-content:center;align-items:center}body #weather-app{grid-area:infos;background-color:#483d8b;width:100%;height:100%;display:flex;padding:2rem;gap:2rem;align-items:center;justify-content:center}body .weather-card{background-color:rgba(0,0,0,.295);grid-column:2/3;width:33vw;height:80vh;border-radius:15%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}body .weather-card .text-informations{width:50%;display:flex;justify-content:space-evenly;color:#fff;font-weight:600}',""]);const i=c},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",o=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),o&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),o&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,o,a,n){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(c[s]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);o&&c[l[0]]||(void 0!==n&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=n),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),e.push(l))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function r(t){for(var r=-1,o=0;o<e.length;o++)if(e[o].identifier===t){r=o;break}return r}function o(t,o){for(var n={},c=[],i=0;i<t.length;i++){var s=t[i],d=o.base?s[0]+o.base:s[0],l=n[d]||0,f="".concat(d," ").concat(l);n[d]=l+1;var u=r(f),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var p=a(h,o);o.byIndex=i,e.splice(i,0,{identifier:f,updater:p,references:1})}c.push(f)}return c}function a(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,a){var n=o(t=t||[],a=a||{});return function(t){t=t||[];for(var c=0;c<n.length;c++){var i=r(n[c]);e[i].references--}for(var s=o(t,a),d=0;d<n.length;d++){var l=r(n[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}n=s}}},659:t=>{var e={};t.exports=function(t,r){var o=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(r)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var o="";r.supports&&(o+="@supports (".concat(r.supports,") {")),r.media&&(o+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(o+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),o+=r.css,a&&(o+="}"),r.media&&(o+="}"),r.supports&&(o+="}");var n=r.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={id:o,exports:{}};return t[o](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{var t=r(72),e=r.n(t),o=r(825),a=r.n(o),n=r(659),c=r.n(n),i=r(56),s=r.n(i),d=r(540),l=r.n(d),f=r(113),u=r.n(f),h=r(11),p={};p.styleTagTransform=u(),p.setAttributes=s(),p.insert=c().bind(null,"head"),p.domAPI=a(),p.insertStyleElement=l(),e()(h.A,p),h.A&&h.A.locals&&h.A.locals;class y{displayLocationInfos(t){const e=document.getElementById("location-zone");e.innerHTML="";const r=Object.values(t);r.forEach(((t,o)=>{const a=document.createElement("p");a.textContent=o<r.length-1?` ${t}, `:` ${t}`,e.append(a)}))}generateWeatherCards(...t){const e=document.getElementById("weather-app");e.innerHTML="",t.forEach((t=>{const r=document.createElement("div");r.classList.add("weather-card"),Object.entries(t).forEach((([t,e])=>{const o=document.createElement("div");if(o.classList.add("text-informations"),e.includes(".jpg")||e.includes(".png")||e.includes(".jpeg")||e.includes(".gif")||e.includes(".bmp")){const t=document.createElement("img");t.src=e,o.appendChild(t)}else{const r=document.createElement("p");t=t.replace(/_/g," "),r.textContent=`${t}: ${e}`,o.appendChild(r)}r.appendChild(o)})),e.appendChild(r)}))}changeBackground(t){document.getElementById("weather-app").style.backgroundImage=`url(${t})`}blurInfos(){const t=document.getElementById("location-zone"),e=document.querySelectorAll(".weather-card");t.classList.toggle("on-loading"),e.forEach((t=>{t.classList.toggle("on-loading")}))}}class m{flattenObject(t,e="",r={}){for(const o in t)"object"==typeof t[o]&&null!==t[o]?this.flattenObject(t[o],`${e}${o}.`,r):r[`${e}${o}`]=t[o];return r}extract(t,...e){const r={};return e.forEach((e=>{let o=t;const a=e.split(".");if(a.forEach((t=>{o=o&&Object.prototype.hasOwnProperty.call(o,t)?o[t]:void 0})),void 0!==o){const t=a[a.length-1];let e=r;for(let t=0;t<a.length-1;t++){const r=a[t];Object.prototype.hasOwnProperty.call(e,r)||(e[r]={}),e=e[r]}e[t]=o}})),r}async fetchWeather(t){try{const e=await fetch(`https://api.Weatherapi.com/v1/forecast.json?key=c9149996cc324fd2ad590353242503&q=${t}&days=3`,{mode:"cors"}),r=await e.json(),o=this.extract(r,"current.condition.text","current.condition.icon","current.feelslike_c","current.humidity","current.precip_mm","current.temp_c","current.wind_kph","current.last_updated","location.country","location.name","location.region","forecast.forecastday.0.date","forecast.forecastday.0.day.maxtemp_c","forecast.forecastday.0.day.mintemp_c","forecast.forecastday.0.day.condition.text","forecast.forecastday.0.day.condition.icon","forecast.forecastday.0.day.daily_chance_of_rain","forecast.forecastday.0.day.totalprecip_mm","forecast.forecastday.1.date","forecast.forecastday.1.day.maxtemp_c","forecast.forecastday.1.day.mintemp_c","forecast.forecastday.1.day.condition.text","forecast.forecastday.1.day.condition.icon","forecast.forecastday.1.day.daily_chance_of_rain","forecast.forecastday.1.day.totalprecip_mm","forecast.forecastday.2.date","forecast.forecastday.2.day.maxtemp_c","forecast.forecastday.2.day.mintemp_c","forecast.forecastday.2.day.condition.text","forecast.forecastday.2.day.condition.icon","forecast.forecastday.2.day.daily_chance_of_rain","forecast.forecastday.2.day.totalprecip_mm");return this.flattenObject(o)}catch(t){throw console.log("Error occured."),console.log(t),t}}async retrieveCurrentWeatherInformations(t){try{const e=await this.fetchWeather(t);return{Condition:e["current.condition.text"],ConditionIcon:e["current.condition.icon"],Temperature:`${e["current.temp_c"]}째C`,Wind:`${e["current.wind_kph"]} kph`,Feelslike:`${e["current.feelslike_c"]}째C`,Humidity:`${e["current.humidity"]}%`,Precipitation:`${e["current.precip_mm"]} mm`,Updated:e["current.last_updated"]}}catch(t){throw console.log(t),t}}async retrieveForecastWeatherInformations(t){try{const e=await this.fetchWeather(t);console.log("This is mainInfos in forecast",e);const r={};for(let t=0;t<3;t++)r[`forecastDay${t}`]={Day:e[`forecast.forecastday.${t}.date`],ConditionIcon:e[`forecast.forecastday.${t}.day.condition.icon`],Condition:e[`forecast.forecastday.${t}.day.condition.text`],Max_temperature:`${e[`forecast.forecastday.${t}.day.maxtemp_c`]}째C`,Min_temperature:`${e[`forecast.forecastday.${t}.day.mintemp_c`]}째C`,Rain_probability_in_mm:`${e[`forecast.forecastday.${t}.day.daily_chance_of_rain`]}mm`,Total_precipitation_in_mm:`${e[`forecast.forecastday.${t}.day.totalprecip_mm`]}mm`};return r}catch(t){throw console.error("Forecast Error:",t),t}}async retrieveCurrentLocationInformations(t){try{const e=await this.fetchWeather(t);return{name:e["location.name"],country:e["location.country"],region:e["location.region"]}}catch(t){throw console.log(t),t}}async fetchGiphy(t){try{const e=await fetch(`https://api.giphy.com/v1/gifs/translate?api_key=0XOA8oYHFEET7n46Lk69XLp09A1rUADD&s=${t}`,{mode:"cors"});if(!e.ok)return null;return(await e.json()).data.images.original.url}catch(t){return console.error("Error fetching GIF:",t),null}}}new class{constructor(){this.view=new y,this.model=new m,this.focus="current",this.location="Paris",this.searchBtnEvent(),this.currentBtnEvent(),this.forecastBtnEvent(),this.generateDefaultWeather()}searchBtnEvent(){document.getElementById("search-btn").addEventListener("click",(async()=>{const t=this.retrieveInputValue();this.location=t,this.callViewToBlur();try{const t=await this.model.retrieveCurrentLocationInformations(this.location);"current"===this.focus?this.currentLogic():"forecast"===this.focus&&this.forecastLogic(),this.callViewToUpdateLocation(t)}catch(t){throw console.log(t),t}}))}forecastBtnEvent(){document.getElementById("forecast-weather").addEventListener("click",(async()=>{this.callViewToBlur(),this.switchFocus(),await this.forecastLogic()}))}async forecastLogic(){const t=await this.model.retrieveForecastWeatherInformations(this.location);this.callViewToBlur();const e=this.model.flattenObject(t.forecastDay0),r=this.model.flattenObject(t.forecastDay1),o=this.model.flattenObject(t.forecastDay2);this.callViewToDisplayWeatherInformations(e,r,o),this.GiphyLogic(e.Condition)}currentBtnEvent(){document.getElementById("current-weather").addEventListener("click",(async()=>{this.switchFocus(),this.callViewToBlur(),this.currentLogic()}))}async currentLogic(){const t=await this.model.retrieveCurrentWeatherInformations(this.location);this.callViewToBlur(),this.callViewToDisplayWeatherInformations(t),this.GiphyLogic(t.Condition)}switchFocus(){this.focus="current"===this.focus?"forecast":"current"}retrieveInputValue(){return document.getElementById("search-bar").value}callViewToUpdateLocation(t){this.view.displayLocationInfos(t)}callViewToDisplayWeatherInformations(...t){this.view.generateWeatherCards(...t)}callViewToChangeBackground(t){this.view.changeBackground(t)}callViewToBlur(){this.view.blurInfos()}async generateDefaultWeather(){try{const t=await this.model.retrieveCurrentLocationInformations("Paris"),e=await this.model.retrieveCurrentWeatherInformations("Paris");this.callViewToUpdateLocation(t),this.callViewToDisplayWeatherInformations(e),this.GiphyLogic(e.Condition)}catch(t){throw console.log("Generate default weather error:",t),t}}async GiphyLogic(t){try{let e=await this.model.fetchGiphy(t);null===e&&(e="https://www.shutterstock.com/shutterstock/photos/1646867911/display_1500/stock-photo-closeup-portrait-of-happy-pensioner-smiling-at-camera-1646867911.jpg"),this.callViewToChangeBackground(e)}catch(t){throw console.log("Error in Giphy Logic process"),t}}}})()})();